ARG BACKEND_FRONTEND_DOCKER_IMAGE_TAG
FROM node:${BACKEND_FRONTEND_DOCKER_IMAGE_TAG}

#-----------------------------------------------------------------------------------------------------------------------

HEALTHCHECK \
  --interval=10s \
  --timeout=3s \
  --start-period=5s \
  --retries=3 \
  CMD npm --version || exit 1

#-----------------------------------------------------------------------------------------------------------------------

RUN apk add --no-cache tini
ENTRYPOINT ["/sbin/tini", "--"]

#-----------------------------------------------------------------------------------------------------------------------

RUN npm install -g pnpm

#-----------------------------------------------------------------------------------------------------------------------

WORKDIR /srv

#-----------------------------------------------------------------------------------------------------------------------

USER node

CMD ["node"]
